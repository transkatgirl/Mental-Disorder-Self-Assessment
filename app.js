// --- Generated by build.sh ---

const hitop_mappings = { "hitop-superspectra-general": { "superspectra": ["General Factor of Psychopathology (p-factor)"], "index": 0 }, "hitop-spectra-somatoform": { "spectra": ["Somatoform"], "index": 1 }, "hitop-spectra-internalizing": { "spectra": ["Internalizing"], "index": 2 }, "hitop-subfactor-sexual": { "spectra": ["Internalizing"], "subfactor": ["Sexual Problems"], "index": 3 }, "hitop-subfactor-eating": { "spectra": ["Internalizing"], "subfactor": ["Eating Pathology"], "index": 4 }, "hitop-subfactor-fear": { "spectra": ["Internalizing"], "subfactor": ["Fear"], "index": 5 }, "hitop-subfactor-distress": { "spectra": ["Internalizing"], "subfactor": ["Distress"], "index": 6 }, "hitop-subfactor-mania": { "spectra": ["Internalizing", "Thought Disorder"], "subfactor": ["Mania"], "index": 7 }, "hitop-spectra-disordered": { "spectra": ["Thought Disorder"], "index": 8 }, "hitop-spectra-detached": { "spectra": ["Detachment"], "index": 9 }, "hitop-superspectra-externalizing": { "superspectra": ["Externalizing"], "index": 10 }, "hitop-spectra-disinhibited": { "superspectra": ["Externalizing"], "spectra": ["Disinhibited Externalizing"], "index": 11 }, "hitop-subfactor-substance": { "superspectra": ["Externalizing"], "spectra": ["Disinhibited Externalizing"], "subfactor": ["Harmful Substance Use"], "index": 12 }, "hitop-subfactor-antisocial": { "superspectra": ["Externalizing"], "spectra": ["Disinhibited Externalizing", "Antagonistic Externalizing"], "subfactor": ["Antisocial Behavior"], "index": 13 }, "hitop-spectra-antagonistic": { "superspectra": ["Externalizing"], "spectra": ["Antagonistic Externalizing"], "index": 14 } };
const hitop_sr = { "metadata": { "label": "HiTOP Self Report Assessment", "label_short": "HiTOP-SR", "description": ["The HiTOP-SR is a mental health intake assessment covering all elements of the HiTOP model.", "HiTOP-consistent assessment instruments are a work in progress; This early version of the HiTOP-SR does not currently cover harmful substance use."], "references": [{ "title": "HiTOP-SR Research-Ready - Version 2023-12-01", "retrieved": 1712840093515, "link": "https://www.3plab.org/hitop/" }] }, "instructions": ["In this survey, you will be asked to respond to a number of statements about your thoughts, feelings, and behavior. Some of these things are pretty common, whereas others are less common.", "As you complete the survey, please consider whether there have been significant times during the last 12 months during which the following statements applied to you. Then please select the option that best describes how well each statement described you during that period."], "interpretation": ["Scores are reported as t-scores, which have a mean of 50 and a standard deviation of 10. Statistically-based cutoffs (such as a t-score of 65-70 or greater) may be useful heuristics, but they should not be used in an inflexible manner. Low scores (such as a t-score below 40) are not always meaningful, and need to be evaluated on a case-by-case basis.", "This scoring system makes the assumption that scores are normally distributed, and this assumption is often violated when evaluating pathological traits. If the scale is not normally distributed, then the t-scores may match up with either a higher or lower percentile, depending on how the distribution is skewed."], "scales": { "Agoraphobia": { "label": "Agoraphobia", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.62", "stddev": "0.77" } }, "mapping": "hitop-subfactor-fear" }, "AntisocActs": { "label": "Antisocial Behavior", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.07", "stddev": "0.25" } }, "mapping": "hitop-subfactor-antisocial" }, "AppetiteLoss": { "label": "Appetite Loss", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.53", "stddev": "0.68" } }, "mapping": "hitop-subfactor-eating" }, "BingeEating": { "label": "Binge Eating", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.65", "stddev": "0.79" } }, "mapping": "hitop-subfactor-eating" }, "BodilyDistress": { "label": "Bodily Distress", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.84", "stddev": "0.74" } }, "mapping": "hitop-spectra-somatoform" }, "BodyDissatisfaction": { "label": "Body Dissatisfaction", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.31", "stddev": "0.94" } }, "mapping": "hitop-subfactor-eating" }, "BodyFocus": { "label": "Body Focus", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.72", "stddev": "0.68" } }, "mapping": "hitop-subfactor-eating" }, "Callousness": { "label": "Callousness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.47", "stddev": "0.55" } }, "mapping": "hitop-spectra-antagonistic" }, "Checking": { "label": "Checking", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.80", "stddev": "0.77" } }, "mapping": "hitop-subfactor-fear" }, "Cleaning": { "label": "Cleaning", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.53", "stddev": "0.58" } }, "mapping": "hitop-subfactor-fear" }, "CogDisorg": { "label": "Cognitive Problems", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.97", "stddev": "0.82" } }, "mapping": "hitop-subfactor-distress" }, "Conversion": { "label": "Conversion Symptoms", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.12", "stddev": "0.31" } }, "mapping": "hitop-spectra-somatoform" }, "Counting": { "label": "Counting", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.34", "stddev": "0.55" } }, "mapping": "hitop-subfactor-fear" }, "DietRestraintEfforts": { "label": "Dietary Restraint", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.12", "stddev": "0.75" } }, "mapping": "hitop-subfactor-eating" }, "DiffReachingOrgasm": { "label": "Difficulties Reaching Orgasm", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.49", "stddev": "0.76" } }, "mapping": "hitop-subfactor-sexual" }, "DiseaseConvict": { "label": "Disease Conviction", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.40", "stddev": "0.69" } }, "mapping": "hitop-spectra-somatoform" }, "Dishonesty": { "label": "Dishonesty", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.48", "stddev": "0.53" } }, "mapping": "hitop-spectra-antagonistic" }, "Disorg": { "label": "Disorganization", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.70", "stddev": "0.63" } }, "mapping": "hitop-spectra-disinhibited" }, "Dissociation": { "label": "Dissociation", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.29", "stddev": "0.52" } }, "mapping": "hitop-spectra-disordered" }, "Distress": { "label": "Distress-Dysphoria", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.19", "stddev": "0.87" } }, "mapping": "hitop-subfactor-distress" }, "Domineering": { "label": "Domineering", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.67", "stddev": "0.64" } }, "mapping": "hitop-spectra-antagonistic" }, "Eccentric": { "label": "Eccentricity", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.40", "stddev": "0.55" } }, "mapping": "hitop-spectra-disordered" }, "Emotionality": { "label": "Emotionality", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.70", "stddev": "0.66" } }, "mapping": "hitop-subfactor-distress" }, "Entitlement": { "label": "Entitlement", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.60", "stddev": "0.52" } }, "mapping": "hitop-spectra-antagonistic" }, "ExcessiveExercise": { "label": "Excessive Exercise", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.19", "stddev": "0.43" } }, "mapping": "hitop-subfactor-eating" }, "Excoriation": { "label": "Excoriation", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.30", "stddev": "0.61" } }, "mapping": "hitop-subfactor-fear" }, "Exhib": { "label": "Exhibitionism", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.39", "stddev": "0.57" } }, "mapping": "hitop-spectra-antagonistic" }, "FantasyProne": { "label": "Fantasy Proneness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.80", "stddev": "0.72" } }, "mapping": "hitop-spectra-disordered" }, "FoodSelectivity": { "label": "Food Selectivity", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.53", "stddev": "0.66" } }, "mapping": "hitop-subfactor-eating" }, "Gambling": { "label": "Gambling", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.17", "stddev": "0.44" } }, "mapping": "hitop-spectra-disinhibited" }, "Gaming": { "label": "Gaming", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.44", "stddev": "0.60" } }, "mapping": "hitop-spectra-disinhibited" }, "Grandiosity": { "label": "Grandiosity", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.95", "stddev": "0.67" } }, "mapping": "hitop-spectra-antagonistic" }, "HealthAnxiety": { "label": "Health Anxiety", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.78", "stddev": "0.81" } }, "mapping": "hitop-spectra-somatoform" }, "Hoarding": { "label": "Hoarding", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.60", "stddev": "0.63" } }, "mapping": "hitop-subfactor-fear" }, "Hyperdelib": { "label": "Hyperdeliberation", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.58", "stddev": "0.74" } }, "mapping": "hitop-spectra-disinhibited" }, "Hypervigilance": { "label": "Hypervigilance", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.92", "stddev": "0.73" } }, "mapping": "hitop-subfactor-fear" }, "Insomnia": { "label": "Insomnia", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.32", "stddev": "0.93" } }, "mapping": "hitop-subfactor-distress" }, "LowSexArousal": { "label": "Low Sexual Arousal", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.56", "stddev": "0.81" } }, "mapping": "hitop-subfactor-sexual" }, "LowSexInterest": { "label": "Low Sexual Interest", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.89", "stddev": "0.95" } }, "mapping": "hitop-subfactor-sexual" }, "ManicEnergy": { "label": "Manic Energy", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.33", "stddev": "0.45" } }, "mapping": "hitop-subfactor-mania" }, "Mistrust": { "label": "Mistrust", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.14", "stddev": "0.84" } }, "mapping": "hitop-spectra-disordered" }, "MuscleBuilding": { "label": "Muscle Building", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.50", "stddev": "0.65" } }, "mapping": "hitop-subfactor-eating" }, "Nightmares": { "label": "Nightmares", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.64", "stddev": "0.77" } }, "mapping": "hitop-subfactor-distress" }, "NonPersist": { "label": "Non-persistence", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.87", "stddev": "0.76" } }, "mapping": "hitop-spectra-disinhibited" }, "NonPlan": { "label": "Non-planfulness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.61", "stddev": "0.65" } }, "mapping": "hitop-spectra-disinhibited" }, "NSSI": { "label": "NSSI", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.18", "stddev": "0.39" } }, "mapping": "hitop-subfactor-distress" }, "Oppositional": { "label": "Oppositionality", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.45", "stddev": "0.56" } }, "mapping": "hitop-subfactor-antisocial" }, "Panic": { "label": "Panic", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.53", "stddev": "0.63" } }, "mapping": "hitop-subfactor-fear" }, "Paraphilias": { "label": "Paraphilias", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.12", "stddev": "0.33" } }, "mapping": "hitop-subfactor-sexual" }, "Perfectionism": { "label": "Perfectionism", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.77", "stddev": "0.76" } }, "mapping": "hitop-spectra-disinhibited" }, "PrematureOrgasm": { "label": "Premature Orgasm", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.45", "stddev": "0.60" } }, "mapping": "hitop-subfactor-sexual" }, "ProbShopping": { "label": "Problematic Shopping", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.47", "stddev": "0.66" } }, "mapping": "hitop-spectra-disinhibited" }, "Purging": { "label": "Purging", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.12", "stddev": "0.35" } }, "mapping": "hitop-subfactor-eating" }, "RealityDist": { "label": "Reality Distortion", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.19", "stddev": "0.37" } }, "mapping": "hitop-spectra-disordered" }, "Restless": { "label": "Restlessness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.46", "stddev": "0.61" } }, "mapping": "hitop-spectra-disinhibited" }, "RestrictedAffect": { "label": "Restricted Affectivity", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.80", "stddev": "0.72" } }, "mapping": "hitop-spectra-detached" }, "RestrictiveEating": { "label": "Restricted Eating", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.48", "stddev": "0.64" } }, "mapping": "hitop-subfactor-eating" }, "Rigidity": { "label": "Rigidity", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.83", "stddev": "0.62" } }, "mapping": "hitop-spectra-disinhibited" }, "RiskAversion": { "label": "Risk Aversion", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.43", "stddev": "0.79" } }, "mapping": "hitop-spectra-disinhibited" }, "RiskTaking": { "label": "Risk Taking", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.39", "stddev": "0.59" } }, "mapping": "hitop-spectra-disinhibited" }, "RiskySex": { "label": "Risky Sex", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.35", "stddev": "0.56" } }, "mapping": "hitop-subfactor-sexual" }, "RomDisinterest": { "label": "Romantic Disinterest", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.04", "stddev": "0.93" } }, "mapping": "hitop-spectra-detached" }, "SexSubstanceUse": { "label": "Sex-Related Substance Use", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.24", "stddev": "0.48" } }, "mapping": "hitop-subfactor-sexual" }, "SexualDistress": { "label": "Sexual Distress", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.59", "stddev": "0.78" } }, "mapping": "hitop-subfactor-sexual" }, "SexualPain": { "label": "Sexual Pain", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.29", "stddev": "0.62" } }, "mapping": "hitop-subfactor-sexual" }, "SocAggression": { "label": "Social Aggression", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.22", "stddev": "0.37" } }, "mapping": "hitop-spectra-antagonistic" }, "SocAloofness": { "label": "Social Aloofness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.49", "stddev": "0.90" } }, "mapping": "hitop-spectra-detached" }, "SocAnxiety": { "label": "Social Anxiety", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.06", "stddev": "0.89" } }, "mapping": "hitop-spectra-detached" }, "SomaticPreocc": { "label": "Somatic Preoccupation", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.36", "stddev": "0.77" } }, "mapping": "hitop-spectra-somatoform" }, "SpecifcPhobiaIndex": { "label": "Specific Phobia Index", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.62", "stddev": "0.53" } }, "mapping": "hitop-subfactor-fear" }, "Submissiveness": { "label": "Submissiveness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.87", "stddev": "0.72" } }, "mapping": "hitop-spectra-detached" }, "Suicidality": { "label": "Suicidality", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.36", "stddev": "0.53" } }, "mapping": "hitop-subfactor-distress" }, "TraumaReactions": { "label": "Trauma Reactions", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.75", "stddev": "0.83" } }, "mapping": "hitop-subfactor-fear" }, "Trichotillomania": { "label": "Trichotillomania", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.20", "stddev": "0.45" } }, "mapping": "hitop-subfactor-fear" }, "Wellbeing": { "label": "Well-being", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.53", "stddev": "0.82" } }, "mapping": "hitop-spectra-detached" }, "Workaholism": { "label": "Workaholism", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.60", "stddev": "0.65" } }, "mapping": "hitop-spectra-disinhibited" }, "Deceitfulness": { "label": "Deceitfulness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.68", "stddev": "0.69" } }, "parent": "Dishonesty", "mapping": "hitop-spectra-antagonistic" }, "Manipulativeness": { "label": "Manipulativeness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.27", "stddev": "0.50" } }, "parent": "Dishonesty", "mapping": "hitop-spectra-antagonistic" }, "Anehdonia": { "label": "Anhedonia", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.07", "stddev": "0.96" } }, "parent": "Distress", "mapping": "hitop-subfactor-distress" }, "AnxiousWorry": { "label": "Anxious Worry", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.25", "stddev": "1.01" } }, "parent": "Distress", "mapping": "hitop-subfactor-distress" }, "DepressedMood": { "label": "Depressed Mood", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.21", "stddev": "1.00" } }, "parent": "Distress", "mapping": "hitop-subfactor-distress" }, "Lassitude": { "label": "Lassitude", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.40", "stddev": "0.97" } }, "parent": "Distress", "mapping": "hitop-subfactor-distress" }, "ShameGuilt": { "label": "Shame/Guilt", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.01", "stddev": "0.94" } }, "parent": "Distress", "mapping": "hitop-subfactor-distress" }, "AffLability": { "label": "Affective Lability", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.51", "stddev": "0.69" } }, "parent": "Emotionality", "mapping": "hitop-subfactor-distress" }, "AngryHostility": { "label": "Angry Hostility", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.53", "stddev": "0.63" } }, "parent": "Emotionality", "mapping": "hitop-subfactor-distress" }, "Irritability": { "label": "irritability", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.00", "stddev": "0.83" } }, "parent": "Emotionality", "mapping": "hitop-subfactor-distress" }, "Cynicism": { "label": "Cynicism", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "2.14", "stddev": "0.84" } }, "parent": "Mistrust", "mapping": "hitop-spectra-disordered" }, "Suspiciousness": { "label": "Suspiciousness", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.54", "stddev": "0.67" } }, "parent": "Mistrust", "mapping": "hitop-spectra-disordered" }, "Delusions": { "label": "Delusions", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.15", "stddev": "0.36" } }, "parent": "RealityDist", "mapping": "hitop-spectra-disordered" }, "Hallucinations": { "label": "Hallucinations", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.23", "stddev": "0.42" } }, "parent": "RealityDist", "mapping": "hitop-spectra-disordered" }, "AnimalPhobia": { "label": "Animal-Insect Phobia", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.80", "stddev": "0.74" } }, "parent": "SpecifcPhobiaIndex", "mapping": "hitop-subfactor-fear" }, "BloodPhobia": { "label": "Blood-Injection Phobia", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.34", "stddev": "0.55" } }, "parent": "SpecifcPhobiaIndex", "mapping": "hitop-subfactor-fear" }, "SituationalPhobia": { "label": "Situational Phobias", "choices": "12-month-significance", "scoring": { "average": true, "percentile": { "as_score": true, "function": "normal", "mean": "1.61", "stddev": "0.62" } }, "parent": "SpecifcPhobiaIndex", "mapping": "hitop-subfactor-fear" } }, "questions": [{ "I felt like I would be unable to breathe in a small, tight, or enclosed space.": "Agoraphobia", "I was afraid of getting trapped in a crowd.": "Agoraphobia", "I avoided small, tight, or enclosed spaces.": "Agoraphobia", "I avoided small public spaces (such as an office or restaurant).": "Agoraphobia", "I was afraid that I would have a panic attack in a small, tight, or enclosed space.": "Agoraphobia", "I felt the urge to check to make sure I really had done something.": "Checking", "Even when I was very careful, I worried whether I had done something correctly.": "Checking", "I had a nagging doubt that I'd failed to do something important.": "Checking", "After I left my home, I worried that I failed to do something.": "Checking", "I found myself worrying whether I actually did something or only intended to do it.": "Checking", "It was difficult for me to touch something that was dirty.": "Cleaning", "I worried about getting germs through contact with animals.": "Cleaning", "I avoided contact with people because I was worried about germs.": "Cleaning", "I felt the need to wash my hands again and again.": "Cleaning", "I was obsessed with cleanliness.": "Cleaning", "I had to clean myself because I felt contaminated.": "Cleaning", "I felt compelled to count things.": "Counting", "I avoided numbers that could bring bad luck.": "Counting", "I counted things over and over again.": "Counting", "I thought that certain numbers were lucky for me.": "Counting", "I needed to count to a certain number before starting an activity.": "Counting", "My skin picking created problems for me.": "Excoriation", "I tried to conceal areas where I had picked at my skin.": "Excoriation", "I picked at areas of my skin that I don't like.": "Excoriation", "I found it difficult to throw things away.": "Hoarding", "I collected things I did not need.": "Hoarding", "My home was so cluttered that it was difficult to get around.": "Hoarding", "I could not resist buying something that I did not need.": "Hoarding", "My compulsive buying caused me financial problems.": "Hoarding", "I kept items that I did not need.": "Hoarding", "I felt like I was in danger.": "Hypervigilance", "I felt on guard and on edge.": "Hypervigilance", "I was easily startled.": "Hypervigilance", "I felt that the world is a dangerous place.": "Hypervigilance", "I was watchful for danger.": "Hypervigilance", "I was concerned that other persons might bring me harm.": "Hypervigilance", "I felt dizzy or lightheaded.": "Panic", "I was trembling or shaking.": "Panic", "My heart was racing or pounding.": "Panic", "I was afraid that I might be having a heart attack.": "Panic", "I was so worked up I thought I might die.": "Panic", "I was afraid of spiders.": "AnimalPhobia", "I was fearful of rats or mice.": "AnimalPhobia", "I was afraid of getting stung or bitten.": "AnimalPhobia", "I avoided areas where there might be snakes or lizards.": "AnimalPhobia", "The sight of an insect (e.g., a cockroach) upset me.": "AnimalPhobia", "Seeing something gory made me woozy.": "BloodPhobia", "The sight of a needle upset me.": "BloodPhobia", "I felt faint at the sight of blood.": "BloodPhobia", "I was afraid of flying.": "SituationalPhobia", "I was afraid of heights.": "SituationalPhobia", "I became very anxious during a storm.": "SituationalPhobia", "I was afraid of the dark.": "SituationalPhobia", "I avoided places that reminded me of something bad that happened.": "TraumaReactions", "I avoided people who might bring back bad memories.": "TraumaReactions", "I had repeated memories of a traumatic event.": "TraumaReactions", "I suddenly felt as if a traumatic event were actually happening again.": "TraumaReactions", "My mind was flooded with troubling images of a bad experience.": "TraumaReactions", "I was embarrassed because I pulled my hair.": "Trichotillomania", "I pulled out hairs that were a different color or texture.": "Trichotillomania", "I felt an urge to pull my hair.": "Trichotillomania" }, { "I vandalized or defaced public property.": "AntisocActs", "I found it enjoyable to hurt animals.": "AntisocActs", "I got in trouble with the law.": "AntisocActs", "I forged checks or used other people's credit cards without permission.": "AntisocActs", "I stole from someone I knew without their knowledge.": "AntisocActs", "I forced someone to have sex with me.": "AntisocActs", "I broke into houses, buildings, or cars.": "AntisocActs", "I threatened someone with a weapon like a bat, brick, knife, or gun.": "AntisocActs", "I enjoyed rebelling against authority figures (e.g., police, teachers, bosses).": "Oppositional", "Life felt too short to follow other peoples' rules.": "Oppositional", "I was a rule breaker.": "Oppositional", "I didn't care whether my behavior was considered proper or not.": "Oppositional", "I didn't pay much attention to social standards of behavior.": "Oppositional", "I did things on purpose that were against the rules.": "Oppositional" }, { "My appetite was poor.": "AppetiteLoss", "I lost a significant amount of weight without even trying.": "AppetiteLoss", "I did not feel much like eating.": "AppetiteLoss", "Once I started eating, I could not stop.": "BingeEating", "I could not resist eating.": "BingeEating", "I ate a very large amount of food in a short period of time (e.g., within 2 hours).": "BingeEating", "I couldn't stop comparing my body to those of others.": "BodyDissatisfaction", "I wished I could change certain parts of my body.": "BodyDissatisfaction", "I was dissatisfied with the shape of my body.": "BodyDissatisfaction", "I did not like my weight (the number on the scale).": "BodyDissatisfaction", "I spent a lot of time looking at myself.": "BodyFocus", "If I passed by a reflective surface (like a window), I checked how I looked.": "BodyFocus", "I spent a lot of time getting ready before going out.": "BodyFocus", "I paid a lot of attention to how I look.": "BodyFocus", "I spent a lot of time grooming myself.": "BodyFocus", "I tried to eat only healthy foods.": "DietRestraintEfforts", "I tried to limit the number of fatty foods I ate.": "DietRestraintEfforts", "I spent time planning how to reduce my food intake.": "DietRestraintEfforts", "I focused on eating more healthy foods.": "DietRestraintEfforts", "I tried to eat fewer snacks.": "DietRestraintEfforts", "People told me I exercised too much.": "ExcessiveExercise", "I exercised more than was good for me.": "ExcessiveExercise", "I exercised until I felt sick.": "ExcessiveExercise", "I exercised when I was injured.": "ExcessiveExercise", "I had to cancel plans in order to get my exercise in.": "ExcessiveExercise", "People told me that I was a very picky eater.": "FoodSelectivity", "I avoided foods because of their smell or texture.": "FoodSelectivity", "I avoided foods because I did not like their appearance": "FoodSelectivity", "Many types of food disgusted me.": "FoodSelectivity", "It was important to me to build muscle mass and eliminate body fat.": "MuscleBuilding", "Bulking up muscle while staying lean was a main fitness goal for me.": "MuscleBuilding", "I wanted well-defined stomach muscles.": "MuscleBuilding", "Being muscular was very important to me.": "MuscleBuilding", "I used medicines or supplements to bulk up.": "MuscleBuilding", "I vomited to control my weight.": "Purging", "I used certain medications (e.g. laxatives, diuretics) to lose weight.": "Purging", "I considered using syrup of ipecac, enemas, or suppositories to lose weight.": "Purging", "People told me that I did not eat enough.": "RestrictiveEating", "I skipped two meals in a row.": "RestrictiveEating", "I went a long time without eating.": "RestrictiveEating", "I made excuses to avoid eating.": "RestrictiveEating" }, { "I had pains in several parts of my body.": "BodilyDistress", "My muscles were weak.": "BodilyDistress", "I felt something was wrong with my body.": "BodilyDistress", "I was bothered by stomach symptoms (diarrhea, nausea, stomach pain etc.)": "BodilyDistress", "I experienced chest pain.": "BodilyDistress", "I was bothered by several bodily symptoms (e.g., headache, fatigue or stomach problems) for which there was no clear or sufficient medical explanation.": "BodilyDistress", "I experienced a sudden sensory loss (e.g., seeing or hearing problems) that doctors could not explain.": "Conversion", "I could not feel things I touched.": "Conversion", "I had periods of unexplained deafness.": "Conversion", "I experienced sudden muscle weakness or paralysis.": "Conversion", "I was troubled by unexplained seizures or convulsions.": "Conversion", "I had periods of unexplained blindness.": "Conversion", "I experienced loss of consciousness or had fainting spells (in the absence of a diagnosed medical disorder)": "Conversion", "I had an illness or disease that others dismissed.": "DiseaseConvict", "I got angry when people did not take my health problems seriously.": "DiseaseConvict", "It was difficult to find healthcare providers who recognized my illness.": "DiseaseConvict", "I was frustrated with having to convince others I had a real illness.": "DiseaseConvict", "I spent too much time thinking about illnesses I might have.": "HealthAnxiety", "Reading articles about disease made me worry about my health.": "HealthAnxiety", "I worried a lot about my health.": "HealthAnxiety", "I was afraid that I might suffer from a serious illness": "HealthAnxiety", "I paid close attention to how my body feels.": "SomaticPreocc", "I noticed small changes to how my body feels.": "SomaticPreocc", "I was acutely aware of what was going on with my body.": "SomaticPreocc", "I could feel changes in my body.": "SomaticPreocc", "I was sensitive to changes in my body.": "SomaticPreocc" }, { "I was not all that concerned with other peoples' needs.": "Callousness", "I did not really care how others felt.": "Callousness", "I did not have much sympathy for others.": "Callousness", "People told me I was coldhearted.": "Callousness", "I did not concern myself with helping people.": "Callousness", "Some people thought I was uncaring and unfeeling.": "Callousness", "I said things that were not true.": "Deceitfulness", "I was willing to tell a small lie to make things easier for myself.": "Deceitfulness", "I believed it was fine to tell a little lie in order to get out of trouble.": "Deceitfulness", "I lied about myself to other people.": "Deceitfulness", "I tried to con or cheat other people.": "Manipulativeness", "I found it easy to deceive others.": "Manipulativeness", "I found it easy to manipulate others.": "Manipulativeness", "I made people believe almost anything.": "Manipulativeness", "I liked having power.": "Domineering", "It was very important for me to take the lead.": "Domineering", "I liked being the person who has the authority.": "Domineering", "When in a group, I liked to be in control.": "Domineering", "Things went best when I told others what to do.": "Domineering", "I was the dominant person in my relationships.": "Domineering", "I was selfish.": "Entitlement", "I deserved special treatment.": "Entitlement", "My needs and wants came first.": "Entitlement", "Some people thought I was self-centered.": "Entitlement", "I expected to get treated better than others.": "Entitlement", "I was jealous of what other people have.": "Entitlement", "I liked attracting the attention of others.": "Exhib", "I enjoyed being the center of attention.": "Exhib", "I did things to get others to notice me.": "Exhib", "I dressed so as to call attention to myself.": "Exhib", "When in public, I liked to stand out.": "Exhib", "People admired me.": "Grandiosity", "I recognized that I had a lot of special qualities.": "Grandiosity", "I enjoyed thinking about my future and the great things it would bring.": "Grandiosity", "I enjoyed looking in the mirror.": "Grandiosity", "Most people would have liked to be like me.": "Grandiosity", "I was very confident in myself around other people.": "Grandiosity", "I mocked people.": "SocAggression", "I tried to break up someone else's friendship or romantic relationship.": "SocAggression", "I insulted others.": "SocAggression", "People said I could be a bully.": "SocAggression", "I spread rumors about other people.": "SocAggression", "I taunted others.": "SocAggression" }, { "I struggled to think clearly.": "CogDisorg", "My mind felt mixed up.": "CogDisorg", "I was easily distracted.": "CogDisorg", "I had trouble remembering things.": "CogDisorg", "My thoughts kept jumping from one thing to another.": "CogDisorg", "Nothing seemed interesting to me.": "Anehdonia", "I didn't get excited about very much.": "Anehdonia", "I didn't experience the joy and pleasure that most other people do.": "Anehdonia", "I was overwhelmed by anxiety.": "AnxiousWorry", "I felt nervous and on edge.": "AnxiousWorry", "I felt very stressed.": "AnxiousWorry", "I felt hopeless about the future.": "DepressedMood", "I felt worthless.": "DepressedMood", "I felt depressed.": "DepressedMood", "I felt down and discouraged.": "DepressedMood", "Took a lot of effort to get going.": "Lassitude", "I had very little energy.": "Lassitude", "I felt worn out.": "Lassitude", "I was disgusted with myself.": "ShameGuilt", "I blamed myself for things.": "ShameGuilt", "I was ashamed of myself.": "ShameGuilt", "My moods were intense and unpredictable.": "AffLability", "My mood changed suddenly for no good reason.": "AffLability", "I quickly went from being sad to being happy.": "AffLability", "I got angry about small things.": "AngryHostility", "I got so angry that I yelled or screamed.": "AngryHostility", "I had angry outbursts.": "AngryHostility", "My temper scared people.": "AngryHostility", "I was easily annoyed.": "Irritability", "I was grouchy.": "Irritability", "I was very irritable.": "Irritability", "Minor frustrations really upset me.": "Irritability", "I slept very poorly.": "Insomnia", "I had trouble staying asleep.": "Insomnia", "I woke up early and could not get back to sleep.": "Insomnia", "I had trouble falling asleep.": "Insomnia", "Nightmares caused me to wake up at night.": "Nightmares", "I had a recurring bad dream.": "Nightmares", "I had a dream so distressing that it continued to affect me after waking.": "Nightmares", "I bit myself on purpose.": "NSSI", "I hurt myself on purpose.": "NSSI", "I felt an urge to hurt myself (cut, burn, bite, etc.).": "NSSI", "I cut myself on purpose.": "NSSI", "At times, I just wanted to feel pain.": "NSSI", "I intentionally scratched my skin so severely that it started bleeding.": "NSSI", "I thought a lot about death.": "Suicidality", "I worked on a plan to kill myself.": "Suicidality", "I thought about killing myself.": "Suicidality", "I tried to kill myself.": "Suicidality" }, { "I was unable to reach orgasm.": "DiffReachingOrgasm", "I reached orgasm later than I wanted to.": "DiffReachingOrgasm", "I found it difficult to reach orgasm.": "DiffReachingOrgasm", "It was difficult for me to get sexually aroused.": "LowSexArousal", "It was difficult for me to stay sexually aroused once sexual activity had started.": "LowSexArousal", "I did not experience enough sexual arousal (penile erection or vaginal lubrication) to enjoy sex.": "LowSexArousal", "I had little or no interest in sexual activity.": "LowSexInterest", "I felt little desire for sexual activity": "LowSexInterest", "I felt uninterested during sexual activity": "LowSexInterest", "My sexual fantasies strained my relationships.": "Paraphilias", "I found watching unsuspecting people who were naked, masturbating, or having sex sexually arousing.": "Paraphilias", "I found exposing my genitals to a stranger sexually arousing.": "Paraphilias", "I found touching or rubbing against a stranger sexually arousing.": "Paraphilias", "I found sexual activity with someone unconscious (e.g., asleep or passed out from alcohol or a drug) sexually arousing.": "Paraphilias", "During sex, I usually climaxed very quickly.": "PrematureOrgasm", "During sex, I consciously tried to delay orgasm so I could last longer.": "PrematureOrgasm", "I reached orgasm sooner than I wanted to.": "PrematureOrgasm", "I was unable to control when I reached orgasm.": "PrematureOrgasm", "I engaged in sexual activities that I later regretted.": "RiskySex", "I engaged in unprotected sex.": "RiskySex", "I used sex to relieve negative feelings (e.g., anxiety, sadness, anger).": "RiskySex", "I engaged in risky sexual activity.": "RiskySex", "Sexual activity was even more enjoyable for me when I was intoxicated/high.": "SexSubstanceUse", "I used substances to reduce anxiety during sexual activity.": "SexSubstanceUse", "I used substances to make my partner more appealing.": "SexSubstanceUse", "I used substances during sex to encourage my partner to use substances too.": "SexSubstanceUse", "I felt guilty about sexual difficulties": "SexualDistress", "I was worried about my sex life.": "SexualDistress", "I felt sexually inadequate.": "SexualDistress", "I was unhappy about my sexual performance.": "SexualDistress", "I tensed up during sexual activity due to pain.": "SexualPain", "I found sex physically uncomfortable.": "SexualPain", "It was painful for me to have (or try to have) penetrative vaginal or anal intercourse.": "SexualPain" }, { "I was never on time.": "Disorg", "I had trouble planning and keeping to schedules.": "Disorg", "I paid my bills late or missed other important deadlines.": "Disorg", "I lost things that I needed.": "Disorg", "I could have improved on my organizational skills.": "Disorg", "I missed appointments because I forgot about them.": "Disorg", "I was a messy person.": "Disorg", "I was unable to resist the impulse to gamble.": "Gambling", "It was hard to stop gambling once I started.": "Gambling", "I kept gambling even though it caused problems in my relationships.": "Gambling", "I bet more money than I could really afford to lose.": "Gambling", "Gambling caused me to go into debt.": "Gambling", "I kept gaming, even though it caused problems at work or school.": "Gaming", "I turned down social invitations so that I could spend more time gaming.": "Gaming", "I looked for ways to make time for gaming.": "Gaming", "My mood was negatively affected when I was unable to game as long as I wanted.": "Gaming", "I quit working (my job, homework, or housework) before I was finished.": "NonPersist", "I could not return to a task after getting distracted.": "NonPersist", "I quit tasks that became too challenging.": "NonPersist", "I was unable to concentrate on a task when it was uninteresting to me.": "NonPersist", "I became disinterested in tasks easily.": "NonPersist", "I made decisions quickly without thinking them through.": "NonPlan", "I said things without thinking.": "NonPlan", "I acted on impulse.": "NonPlan", "I did something spontaneous that I later regretted.": "NonPlan", "I failed to consider the consequences of an action.": "NonPlan", "I found it hard to resist the urge to shop.": "ProbShopping", "I bought much more than I needed.": "ProbShopping", "I kept my shopping a secret.": "ProbShopping", "I spent more money shopping than I could afford.": "ProbShopping", "I felt restless when I had to sit still for more than ten minutes.": "Restless", "I had a hard time staying in my seat when I was supposed to be seated.": "Restless", "I felt the need to stand up when I should have been sitting down.": "Restless", "I avoided activities where I would need to sit down for long.": "Restless", "I had trouble sitting still.": "Restless", "I was a thrill-seeker.": "RiskTaking", "People would describe me as a risk-taker.": "RiskTaking", "I enjoyed activities that were a little bit dangerous.": "RiskTaking", "Taking risks made me feel alive.": "RiskTaking" }, { "I had the experience that everything suddenly seemed unfamiliar and I forgot where I was.": "Dissociation", "I felt like I no longer existed.": "Dissociation", "I had blank spells or periods of missing time.": "Dissociation", "I felt that things around me were not real.": "Dissociation", "I felt like I was outside of my body.": "Dissociation", "I had trouble telling whether something really happened or I just imagined it.": "Dissociation", "Many people thought that my behavior was really strange.": "Eccentric", "I thought about things in unusual ways.": "Eccentric", "I said unusual things.": "Eccentric", "People said I am strange.": "Eccentric", "People told me that I was being inappropriate.": "Eccentric", "I was prone to daydreaming.": "FantasyProne", "My fantasies felt very real to me.": "FantasyProne", "I wished I lived in my fantasies instead of real life.": "FantasyProne", "My mind wandered far away from the present.": "FantasyProne", "My imagination held my attention for hours.": "FantasyProne", "I lost myself in a fictional character.": "FantasyProne", "People were basically selfish with little concern for others.": "Cynicism", "Others could not be trusted.": "Cynicism", "I believed that if you are not careful, other people will take advantage of you.": "Cynicism", "Most people were just out for themselves.": "Cynicism", "Some people were out to harm me.": "Suspiciousness", "People talked behind my back.": "Suspiciousness", "I was very suspicious of other people.": "Suspiciousness", "I felt that other persons were acting against me.": "Suspiciousness", "I could control things with my mind.": "Delusions", "I thought it may be possible for other people to read my mind, or for me to read other's minds.": "Delusions", "I believed other people could actually hear my thoughts.": "Delusions", "Special messages were written in papers or announced on TV just for me.": "Delusions", "I thought I was the only one chosen by God for a special role.": "Delusions", "I experienced strange sights or sounds.": "Hallucinations", "I smelled things that were not actually there.": "Hallucinations", "I saw things that were not really there.": "Hallucinations", "I saw a person but then realized it was just a shadow.": "Hallucinations", "I heard things that no one else could hear.": "Hallucinations", "I had a sensation that something was crawling under my skin.": "Hallucinations" }, { "I put a lot of thought into ideas before I took any action.": "Hyperdelib", "I examined every single option before making a selection.": "Hyperdelib", "Major decisions took months of careful consideration to arrive at a choice.": "Hyperdelib", "I made decisions only after I had all the information I could get.": "Hyperdelib", "I carefully weighed out the pros and cons before I made any decision.": "Hyperdelib", "I took time to consider all possible outcomes before making any decision.": "Hyperdelib", "People told me that I was too perfectionistic.": "Perfectionism", "My desire for things to be flawless kept me from getting everything done.": "Perfectionism", "I strove for perfection, even when others said that I should move on.": "Perfectionism", "I felt that my work must be flawless.": "Perfectionism", "I demanded perfection from myself.": "Perfectionism", "I refused to budge as a matter of principle, even on small matters.": "Rigidity", "I continued to do things the same way, even though my approach clearly wasn't working.": "Rigidity", "I was very set in my ways.": "Rigidity", "I refused to compromise because I knew I was right.": "Rigidity", "I was rigid and inflexible in my approach to doing things.": "Rigidity", "I went out of my way to avoid risks.": "RiskAversion", "I was cautious.": "RiskAversion", "I preferred to do things the safest way possible.": "RiskAversion", "I did not like taking chances.": "RiskAversion", "I was very cautious about taking risks.": "RiskAversion", "I avoided taking risks at all costs.": "RiskAversion", "I was something of a workaholic.": "Workaholism", "Even on days off, I found myself thinking about work.": "Workaholism", "I was so focused on being productive that I had less time for friends and family.": "Workaholism", "My work success was the most valuable aspect of my life.": "Workaholism", "People told me that I work too much.": "Workaholism" }, { "Others noticed that I was unusually excited or up.": "ManicEnergy", "I felt a lot more hyper or active than usual.": "ManicEnergy", "I was much more talkative than usual.": "ManicEnergy", "I had so much energy that others couldn't keep up with me.": "ManicEnergy", "I felt like I could go for days without sleeping.": "ManicEnergy", "I felt like I could keep going and going without ever getting tired.": "ManicEnergy", "I had much more energy than usual.": "ManicEnergy" }, { "I hid my emotions.": "RestrictedAffect", "I hardly showed any feelings.": "RestrictedAffect", "I didn't respond to things that other people found emotional.": "RestrictedAffect", "People told me that I do not show emotions.": "RestrictedAffect", "I didn't express my emotions.": "RestrictedAffect", "I found romantic relationships to be tiresome.": "RomDisinterest", "Romantic relationships seemed like a hassle to me.": "RomDisinterest", "I felt that I did not want to be in a close relationship.": "RomDisinterest", "I had no interest in romantic relationships.": "RomDisinterest", "I was happiest when I was in a romantic relationship.": "RomDisinterest", "When I had the chance, I chose to be alone rather than with other people.": "SocAloofness", "Interacting with others was not very important to me.": "SocAloofness", "I did not feel like spending time with people.": "SocAloofness", "I was happiest when I was alone.": "SocAloofness", "I preferred to stay home than to go to a party.": "SocAloofness", "I felt shy around other people.": "SocAnxiety", "I had difficulty making eye contact with others.": "SocAnxiety", "I was uncomfortable meeting new people.": "SocAnxiety", "I avoided performing or giving a talk in front of others.": "SocAnxiety", "I got anxious when others were watching me.": "SocAnxiety", "I allowed people to take advantage of me.": "Submissiveness", "I had trouble standing up for myself.": "Submissiveness", "I had a hard time asserting myself to others.": "Submissiveness", "Others could easily take advantage of me because I was too passive.": "Submissiveness", "I was proud of myself.": "Wellbeing", "I felt cheerful.": "Wellbeing", "I felt optimistic.": "Wellbeing", "I felt good about myself.": "Wellbeing", "I felt motivated.": "Wellbeing" }], "choices": { "12-month-significance": { "instructions": "In the past 12 months:", "options": ["Not at all", "A little", "Moderately", "A lot"] } } };
const whodas_full = { "metadata": { "label": "WHO Disability Assessment Schedule 2.0", "label_short": "WHODAS 2.0", "description": ["The WHODAS 2.0 assessment is a generic instrument for assessing health status and disability across different cultures and settings. It can be used across all diseases, including mental, neurological and addictive disorders."], "references": [{ "title": "WHO Disability Assessment Schedule 2.0", "retrieved": 1712848318199, "link": "https://www.who.int/standards/classifications/international-classification-of-functioning-disability-and-health/who-disability-assessment-schedule" }] }, "instructions": ["This questionnaire asks about difficulties due to health conditions. Health conditions include diseases or illnesses, other health problems that may be short or long lasting, injuries, mental or emotional problems, and problems with alcohol or drugs.", "Think back over the past 30 days and answer these questions, thinking about how much difficulty you had doing the following activities."], "interpretation": ["Scores ranging from 0 to 100 are reported. A score of 0 represents no disability, while a score of 100 represents full disability."], "scales": { "total": { "label": "Total", "scoring": { "average": true, "round": true, "percentile": { "function": "ln", "multiplier": 14.372, "intercept": 37.598 } } }, "cognition": { "label": "Cognition", "choices": "30-day-average-difficulty", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" }, "mobility": { "label": "Mobility", "choices": "30-day-average-difficulty", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" }, "self-care": { "label": "Self-care", "choices": "30-day-average-difficulty", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" }, "getting-along": { "label": "Getting along", "choices": "30-day-average-difficulty-optional", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" }, "life-activities": { "label": "Life activities", "choices": "30-day-average-difficulty-optional", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" }, "participation": { "label": "Participation", "choices": "30-day-average", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25 }, "parent": "total" } }, "questions": [{ "Concentrating on doing something for ten minutes?": "cognition", "Remembering to do important things?": "cognition", "Analysing and finding solutions to problems in day-to-day life?": "cognition", "Learning a new task, for example, learning how to get to a new place?": "cognition", "Generally understanding what people say?": "cognition", "Starting and maintaining a conversation?": "cognition" }, { "Standing for long periods such as 30 minutes?": "mobility", "Standing up from sitting down?": "mobility", "Moving around inside your home?": "mobility", "Getting out of your home?": "mobility", "Walking a long distance such as a kilometre [or equivalent]?": "mobility" }, { "Washing your whole body?": "self-care", "Getting dressed?": "self-care", "Eating?": "self-care", "Staying by yourself for a few days?": "self-care" }, { "Dealing with people you do not know?": "getting-along", "Maintaining a friendship?": "getting-along", "Getting along with people who are close to you?": "getting-along", "Making new friends?": "getting-along", "Sexual activities?": "getting-along" }, { "Taking care of your household responsibilities?": "life-activities", "Doing most important household tasks well?": "life-activities", "Getting all the household work done that you needed to do?": "life-activities", "Getting your household work done as quickly as needed?": "life-activities", "Your day-to-day work/school?": "life-activities", "Doing your most important work/school tasks well?": "life-activities", "Getting all the work done that you need to do?": "life-activities", "Getting your work done as quickly as needed?": "life-activities" }, { "How much of a problem did you have in joining in community activities (for example, festivities, religious or other activities) in the same way as anyone else can?": "participation", "How much of a problem did you have because of barriers or hindrances in the world around you?": "participation", "How much of a problem did you have living with dignity because of the attitudes and actions of others?": "participation", "How much time did you spend on your health condition, or its consequences?": "participation", "How much have you been emotionally affected by your health condition?": "participation", "How much has your health been a drain on the financial resources of you or your family?": "participation", "How much of a problem did your family have because of your health problems?": "participation", "How much of a problem did you have in doing things by yourself for relaxation or pleasure?": "participation" }, { "Overall, in the past 30 days, how many days were these difficulties present?": "number-of-days", "In the past 30 days, for how many days were you totally unable to carry out your usual activities or work because of any health condition?": "number-of-days", "In the past 30 days, not counting the days that you were totally unable, for how many days did you cut back or reduce your usual activities or work because of any health condition?": "number-of-days" }], "choices": { "30-day-average": { "instructions": "In the past 30 days:", "options": ["None", "Mild", "Moderate", "Severe", "Extreme or cannot do"] }, "30-day-average-difficulty": { "instructions": "In the past 30 days, how much difficulty did you have in:", "options": ["None", "Mild", "Moderate", "Severe", "Extreme or cannot do"] }, "30-day-average-difficulty-optional": { "instructions": "In the past 30 days, how much difficulty did you have in:", "skip_option": "Not Applicable", "options": ["None", "Mild", "Moderate", "Severe", "Extreme or cannot do"] }, "number-of-days": { "range": { "minimum": 0, "maximum": 30, "increment": 1 } } } };
const whodas_short = { "metadata": { "label": "WHO Disability Assessment Schedule 2.0", "label_short": "WHODAS 2.0", "description": ["The WHODAS 2.0 assessment is a generic instrument for assessing health status and disability across different cultures and settings. It can be used across all diseases, including mental, neurological and addictive disorders."], "references": [{ "title": "WHO Disability Assessment Schedule 2.0", "retrieved": 1712848318199, "link": "https://www.who.int/standards/classifications/international-classification-of-functioning-disability-and-health/who-disability-assessment-schedule" }] }, "instructions": ["This questionnaire asks about difficulties due to health conditions. Health conditions include diseases or illnesses, other health problems that may be short or long lasting, injuries, mental or emotional problems, and problems with alcohol or drugs.", "Think back over the past 30 days and answer these questions, thinking about how much difficulty you had doing the following activities."], "interpretation": ["Scores ranging from 0 to 100 are reported. A score of 0 represents no disability, while a score of 100 represents full disability."], "scales": { "total": { "label": "Functional Impairment", "choices": "30-day-average-difficulty", "scoring": { "average": true, "round": true, "offset": -1, "multiplier": 25, "percentile": { "function": "ln", "multiplier": 18.4, "intercept": 51.778 } } } }, "randomize": false, "questions": [{ "Standing for long periods such as 30 minutes?": "total", "Taking care of your household responsibilities?": "total", "Learning a new task, for example, learning how to get to a new place?": "total" }, { "How much of a problem did you have joining in community activities (for example, festivities, religious or other activities) in the same way as anyone else can?": "total", "How much have you been emotionally affected by your health problems?": "total" }, { "Concentrating on doing something for ten minutes?": "total", "Walking a long distance such as a kilometre [or equivalent]?": "total", "Washing your whole body?": "total", "Getting dressed?": "total", "Dealing with people you do not know?": "total", "Maintaining a friendship?": "total", "Your day-to-day work?": "total" }, { "Overall, in the past 30 days, how many days were these difficulties present?": "number-of-days", "In the past 30 days, for how many days were you totally unable to carry out your usual activities or work because of any health condition?": "number-of-days", "In the past 30 days, not counting the days that you were totally unable, for how many days did you cut back or reduce your usual activities or work because of any health condition?": "number-of-days" }], "choices": { "30-day-average-difficulty": { "instructions": "In the past 30 days, how much difficulty did you have in:", "options": ["None", "Mild", "Moderate", "Severe", "Extreme or cannot do"] }, "number-of-days": { "range": { "minimum": 0, "maximum": 30, "increment": 1 } } } };

// --- End generated section ---

const assessments = [hitop_sr, whodas_full];

// TODO: Improve checks when working with assessment data

function getZPercentile(z) {
	if (z < -6.5)
		return 0.0;
	if (z > 6.5)
		return 1.0;

	var factK = 1;
	var sum = 0;
	var term = 1;
	var k = 0;
	var loopStop = Math.exp(-23);
	while (Math.abs(term) > loopStop) {
		term = .3989422804 * Math.pow(-1, k) * Math.pow(z, k) / (2 * k + 1) / Math.pow(2, k) * Math.pow(z, k + 1) / factK;
		sum += term;
		k++;
		factK *= k;

	}
	sum += 0.5;

	return sum;
}

function getOrdinalSuffix(i) {
	let j = i % 10,
		k = i % 100;
	if (j === 1 && k !== 11) {
		return i + "st";
	}
	if (j === 2 && k !== 12) {
		return i + "nd";
	}
	if (j === 3 && k !== 13) {
		return i + "rd";
	}
	return i + "th";
}

function shuffle(array) {
	for (let i = array.length - 1; i > 0; i--) {
		let j = Math.floor(Math.random() * (i + 1));
		[array[i], array[j]] = [array[j], array[i]];
	}
}

function approximate(number) {
	const multiplier = 10 ** Math.floor(Math.log10(number));

	return Math.round((number / multiplier)) * multiplier;
}

function approximate_lower(number) {
	const multiplier = 10 ** Math.floor(Math.log10(number));

	return Math.floor((number / multiplier)) * multiplier;
}

function approximate_higher(number) {
	const multiplier = 10 ** Math.floor(Math.log10(number));

	return Math.ceil((number / multiplier)) * multiplier;
}

shuffle(hitop_sr.questions);
for (let index = 0; index < hitop_sr.questions.length; ++index) {
	shuffle(hitop_sr.questions[index]);
}

function build_assessment_instructions(assessment) {
	const assessment_instructions = document.createElement("div");

	const assessment_title = document.createElement("h2");
	assessment_title.innerText = assessment.metadata.label;
	assessment_instructions.appendChild(assessment_title);

	assessment.instructions.forEach(function (item, index) {
		const paragraph = document.createElement("p");
		paragraph.innerText = item;
		assessment_instructions.appendChild(paragraph);
	});

	return assessment_instructions;
}

// TODO: Enable input.required

function build_assessment_section(section_form, assessment, index, question_ids) {
	var assessment_section;

	var section_header;
	var section_options;
	var section_table;

	var inner_index = -1;

	for (let [key, value] of Object.entries(assessment.questions[index])) {
		inner_index += 1;
		var choice;
		var scale;

		if (value in assessment.scales) {
			if (assessment.scales[value].choices in assessment.choices) {
				choice = assessment.choices[assessment.scales[value].choices];
			} else {
				console.warn(assessment.scales[value].choices + "not in choices");
				continue;
			}

			scale = value;
		} else if (value in assessment.choices) {
			choice = assessment.choices[value];
		} else {
			console.warn(value + " not in scales or choices");
			continue;
		}

		if (choice.instructions !== section_header) {
			assessment_section = document.createElement("fieldset");
			section_options = null;

			if (choice.instructions != null) {
				const section_instructions = document.createElement("legend");
				section_instructions.innerText = choice.instructions;

				assessment_section.appendChild(section_instructions);
			}

			section_form.appendChild(assessment_section);

			section_header = choice.instructions;
		} else if (assessment_section == null) {
			assessment_section = document.createElement("fieldset");
			section_options = null;

			section_form.appendChild(assessment_section);
		}

		if (choice.options != null) {
			if (choice.options != section_options) {
				section_table = document.createElement("table");
				if (section_options != null) {
					assessment_section.appendChild(document.createElement("br"));
				}
				assessment_section.appendChild(section_table);

				section_options = choice.options;
			}

			const question_row = document.createElement("tr");

			const question = document.createElement("th");
			question.innerText = key;
			question.id = assessment.metadata.label_short + "_" + index + "_" + inner_index;
			if (scale != null) {
				question_ids.set(question.id, scale);
			} else {
				question_ids.set(question.id, key);
			}
			question.htmlFor = question.id;
			question_row.appendChild(question);

			const skip = choice.skip_option;
			if (skip != null) {
				const choice = document.createElement("td");

				const choice_label = document.createElement("label");
				choice_label.htmlFor = question.id + "_skip";
				choice_label.innerText = skip;

				const choice_button = document.createElement("input");
				choice_button.type = "radio";
				choice_button.name = question.htmlFor;
				choice_button.id = question.id + "_skip";
				choice_button.value = "skip";
				//choice_button.required = true;

				choice.appendChild(choice_button);
				choice.appendChild(choice_label);

				question_row.appendChild(choice);
			}

			choice.options.forEach(function (item, index) {
				const choice = document.createElement("td");

				const choice_label = document.createElement("label");
				choice_label.htmlFor = question.id + "_" + index;
				choice_label.innerText = item;

				const choice_button = document.createElement("input");
				choice_button.type = "radio";
				choice_button.name = question.htmlFor;
				choice_button.id = question.id + "_" + index;
				choice_button.value = index + 1;
				//choice_button.required = true;

				choice.appendChild(choice_button);
				choice.appendChild(choice_label);

				question_row.appendChild(choice);
			});

			section_table.appendChild(question_row);
		} else if (choice.range != null) {
			if (choice.range != section_options) {
				section_table = document.createElement("table");
				if (section_options != null) {
					assessment_section.appendChild(document.createElement("br"));
				}
				assessment_section.appendChild(section_table);

				section_options = choice.range;
			}

			const question_row = document.createElement("tr");

			const question = document.createElement("th");
			question.innerText = key;
			question.id = assessment.metadata.label_short + "_" + index + "_" + inner_index;
			if (scale != null) {
				question_ids.set(question.id, scale);
			} else {
				question_ids.set(question.id, key);
			}
			question.htmlFor = question.id;

			const range = document.createElement("input");
			range.type = "number";
			range.name = question.htmlFor;
			range.id = question.id + "_range";
			range.min = choice.range.minimum;
			range.max = choice.range.maximum;
			range.step = choice.range.increment;
			//range.required = true;

			const option = document.createElement("td");
			option.appendChild(range);

			question_row.appendChild(question);
			question_row.appendChild(option);

			section_table.appendChild(question_row);
		} else {
			console.warn(value + "has no options or range");
		}
	}

	section_form.appendChild(document.createElement("br"));
}

function build_assessment(assessment) {
	const question_ids = new Map();

	const assessment_form = document.createElement("form");
	assessment_form.id = assessment.metadata.label_short + "_form";

	assessment_form.appendChild(build_assessment_instructions(assessment));
	assessment.questions.forEach(function (item, index) {
		build_assessment_section(assessment_form, assessment, index, question_ids);
	});

	const submit_button = document.createElement("button");
	submit_button.innerText = "Score assessment";
	assessment_form.appendChild(submit_button);

	const assessment_area = document.createElement("div");
	assessment_area.id = assessment.metadata.label_short;
	assessment_area.appendChild(assessment_form);

	assessment_form.addEventListener("submit", (event) => {
		event.preventDefault();

		var [scores, percentiles] = score_assessment(assessment, question_ids, new FormData(assessment_form));
		display_assessment_results(assessment, scores, percentiles, assessment_area);
	});

	return assessment_area;
}

function score_assessment(assessment, question_ids, formdata) {
	const scores = new Map();
	const score_items = new Map();

	for (const [key, value] of formdata.entries()) {
		if (question_ids.has(key)) {
			const score_id = question_ids.get(key);

			if (value == "skip") {
				continue;
			}

			if (scores.has(score_id)) {
				if (!isNaN(parseInt(value))) {
					if (typeof scores.get(score_id) == "number") {
						scores.set(score_id, scores.get(score_id) + parseInt(value));
						score_items.set(score_id, score_items.get(score_id) + 1);
					} else {
						console.warn("duplicate of score_id: " + key + " : " + value);
					}
				} else if (!isNaN(parseFloat(value))) {
					if (typeof scores.get(score_id) == "number") {
						scores.set(score_id, scores.get(score_id) + parseFloat(value));
						score_items.set(score_id, score_items.get(score_id) + 1);
					} else {
						console.warn("duplicate of score_id: " + key + " : " + value);
					}
				} else {
					console.warn("duplicate of score_id: " + key + " : " + value);
				}
			} else {
				if (!isNaN(parseInt(value))) {
					scores.set(score_id, parseInt(value));
				} else if (!isNaN(parseFloat(value))) {
					scores.set(score_id, parseFloat(value));
				} else {
					scores.set(score_id, value);
				}
				score_items.set(score_id, 1);
			}
		}
	}

	for (const [key, value] of scores.entries()) {
		if (key in assessment.scales) {
			var score = value;
			var percentile;

			if (assessment.scales[key].scoring.average) {
				score = score / score_items.get(key);
			}

			if (assessment.scales[key].scoring.offset != null) {
				score = score + assessment.scales[key].scoring.offset;
			}

			if (assessment.scales[key].scoring.multiplier != null) {
				score = score * assessment.scales[key].scoring.multiplier;
			}

			scores.set(key, score);
		}
	}

	const subscore_items = new Map();

	for (const [key, value] of scores.entries()) {
		if (key in assessment.scales) {
			if (assessment.scales[key].parent != null) {
				if (scores.has(assessment.scales[key].parent)) {
					scores.set(assessment.scales[key].parent, scores.get(assessment.scales[key].parent) + value);
					if (subscore_items.has(assessment.scales[key].parent)) {
						subscore_items.set(assessment.scales[key].parent, subscore_items.get(assessment.scales[key].parent) + 1);
					} else {
						subscore_items.set(assessment.scales[key].parent, 2);
					}
				} else {
					scores.set(assessment.scales[key].parent, value);
					subscore_items.set(assessment.scales[key].parent, 1);
				}
			}
		}
	}

	for (const [key, value] of subscore_items.entries()) {
		scores.set(key, scores.get(key) / value);
	}

	const percentiles = new Map();

	for (const [key, value] of scores.entries()) {
		if (key in assessment.scales) {
			if (assessment.scales[key].scoring.percentile != null) {
				if (assessment.scales[key].scoring.percentile.function == "normal") {
					const z_score = (value - assessment.scales[key].scoring.percentile.mean) / assessment.scales[key].scoring.percentile.stddev;

					if (assessment.scales[key].scoring.percentile.as_score) {
						scores.set(key, Math.round((z_score * 10) + 50));
					}

					percentile = getZPercentile(z_score) * 100;
				} else if (assessment.scales[key].scoring.percentile.function == "ln") {
					if (value == 0) {
						percentile = assessment.scales[key].scoring.percentile.intercept;
					} else {
						percentile = (Math.log(value) * assessment.scales[key].scoring.percentile.multiplier) + assessment.scales[key].scoring.percentile.intercept;
					}
				}
			}

			if (percentile >= 100) {
				percentile = 100;
			}

			if (assessment.scales[key].scoring.round) {
				scores.set(key, Math.round(value));
			}

			if ((percentile != null) && (percentile >= 0)) {
				percentiles.set(key, percentile);
			}
		}
	}

	return [scores, percentiles];
}

function build_assessment_interpretation(assessment) {
	const assessment_info = document.createElement("div");

	const assessment_title = document.createElement("h2");
	assessment_title.innerText = assessment.metadata.label;
	assessment_info.appendChild(assessment_title);

	assessment.metadata.description.forEach(function (item, index) {
		const paragraph = document.createElement("p");
		paragraph.innerText = item;
		assessment_info.appendChild(paragraph);
	});

	/*if (assessment.metadata.mapping != null) {
		const assessment_mapping_title = document.createElement("h3");
		assessment_mapping_title.innerText = "Result Mapping";

		// TODO

		assessment_info.appendChild(assessment_mapping_title);
	}*/

	/*if (assessment.metadata.dependencies != null) {
		assessment.metadata.dependencies.forEach(function (item, index) {
			if (item.name == "hitop") {
				assessment_info.appendChild(build_model_details(hitop));
			}
		});
	}*/

	const assessment_results_title = document.createElement("h3");
	assessment_results_title.innerText = "Results";
	assessment_info.appendChild(assessment_results_title);

	assessment.interpretation.forEach(function (item, index) {
		const paragraph = document.createElement("p");
		paragraph.innerText = item;
		assessment_info.appendChild(paragraph);
	});

	return assessment_info;
}

function build_assessment_results(assessment, scores, percentiles) {
	const results_tables = document.createElement("div");

	const results_table = document.createElement("table");

	console.log("final_scores", scores);
	console.log("percentiles", percentiles);

	var has_subscores = false;
	var has_non_scored_fields = false;
	var has_mappings = false;

	for (const [key, value] of Object.entries(assessment.scales)) {
		if (value.parent != null) {
			has_subscores = true;
		}
		if (value.mapping != null) {
			has_mappings = true;
		}
	}

	const sorted_scores = new Array();
	for (const [key, value] of scores.entries()) {
		if (!(key in assessment.scales)) {
			has_non_scored_fields = true;
		}
		sorted_scores.push([key, value]);
	}

	sorted_scores.sort(function (a, b) {
		if (a[0] in assessment.scales) {
			if (b[0] in assessment.scales) {
				var label_a;
				var label_b;

				if (assessment.scales[a[0]].label != null) {
					label_a = assessment.scales[a[0]].label;
				} else {
					label_a = a[0];
				}

				if (assessment.scales[b[0]].label != null) {
					label_b = assessment.scales[b[0]].label;
				} else {
					label_b = b[0];
				}

				if (assessment.scales[a[0]].parent != null) {
					if ((assessment.scales[a[0]].parent in assessment.scales) && (assessment.scales[assessment.scales[a[0]].parent].label != null)) {
						label_a = assessment.scales[assessment.scales[a[0]].parent].label + "___" + label_a;
					} else {
						label_a = assessment.scales[a[0]].parent + "___" + label_a;
					}
				}

				if (assessment.scales[b[0]].parent != null) {
					if ((assessment.scales[b[0]].parent in assessment.scales) && (assessment.scales[assessment.scales[b[0]].parent].label != null)) {
						label_b = assessment.scales[assessment.scales[b[0]].parent].label + "___" + label_b;
					} else {
						label_b = assessment.scales[b[0]].parent + "___" + label_b;
					}
				}

				if (assessment.scales[a[0]].mapping != null) {
					if (assessment.scales[a[0]].mapping in hitop_mappings) {
						label_a = hitop_mappings[assessment.scales[a[0]].mapping].index + "___" + label_a;
					} else {
						label_a = assessment.scales[a[0]].mapping + "___" + label_a;
					}
				} else {
					label_a = "ZZZZZZZZZZ___" + label_a;
				}

				if (assessment.scales[b[0]].mapping != null) {
					if (assessment.scales[b[0]].mapping in hitop_mappings) {
						label_b = hitop_mappings[assessment.scales[b[0]].mapping].index + "___" + label_b;
					} else {
						label_b = assessment.scales[b[0]].mapping + "___" + label_b;
					}
				} else {
					label_b = "ZZZZZZZZZZ___" + label_b;
				}

				return label_a.localeCompare(label_b);
			} else {
				return -1;
			}
		} else {
			if (b[0] in assessment.scales) {
				return 1;
			} else {
				return a[0].localeCompare(b[0]);
			}
		}
	});

	console.log(sorted_scores);

	const table_head = document.createElement("thead");
	const table_head_row = document.createElement("tr");

	const table_head_item_scale = document.createElement("th");
	table_head_item_scale.innerText = "Scale";
	table_head_row.appendChild(table_head_item_scale);
	if (has_subscores) {
		const table_head_item_subscale = document.createElement("th");
		table_head_item_subscale.innerText = "Subscale";
		table_head_row.appendChild(table_head_item_subscale);
	}

	const table_head_item_value = document.createElement("th");
	table_head_item_value.innerText = "Value";
	table_head_row.appendChild(table_head_item_value);

	table_head.appendChild(table_head_row);
	results_table.appendChild(table_head);

	const table_body = document.createElement("tbody");

	var last_scale;
	var last_spectra;
	var last_subfactor;

	for (const [key, value] of sorted_scores) {
		if (key in assessment.scales) {
			const table_row = document.createElement("tr");

			if ((has_subscores) && (assessment.scales[key].parent != null)) {
				const table_item_score = document.createElement("td");

				if (assessment.scales[key].parent != null) {
					if (last_scale != assessment.scales[key].parent) {
						if ((assessment.scales[key].parent in assessment.scales) && (assessment.scales[assessment.scales[key].parent].label != null)) {
							table_item_score.innerText = assessment.scales[assessment.scales[key].parent].label;
						} else {
							table_item_score.innerText = assessment.scales[key].parent;
						}
						last_scale = assessment.scales[key].parent;
					} else {
						table_item_score.innerText = "...";
					}
				}
				table_row.appendChild(table_item_score);
			}

			const table_item_key = document.createElement("td");
			if (assessment.scales[key].label != null) {
				table_item_key.innerText = assessment.scales[key].label;
			} else {
				table_item_key.innerText = key;
			}
			table_row.appendChild(table_item_key);

			if ((has_subscores) && (assessment.scales[key].parent == null)) {
				last_scale = key;
				table_row.appendChild(document.createElement("td"));
			}

			const table_item_value = document.createElement("td");

			if (percentiles.has(key)) {
				if (percentiles.get(key) > 99) {
					table_item_value.innerText = value + " (>99th percentile)";
				} else if (percentiles.get(key) < 1) {
					table_item_value.innerText = value + " (<1st percentile)";
				} else {
					table_item_value.innerText = value + " (" + getOrdinalSuffix(Math.round(percentiles.get(key))) + " percentile)";
				}
				if (percentiles.get(key) <= (getZPercentile(-1) * 100)) {
					table_item_value.setAttribute("class", "score-low");
				} else if (percentiles.get(key) >= (getZPercentile(2) * 100)) {
					table_item_value.setAttribute("class", "score-alert");
				} else if (percentiles.get(key) >= (getZPercentile(1) * 100)) {
					table_item_value.setAttribute("class", "score-warn");
				}
			} else {
				table_item_value.innerText = value;
			}
			table_row.appendChild(table_item_value);

			table_body.appendChild(table_row);
		}
	}

	results_table.appendChild(table_body);

	results_tables.appendChild(results_table);

	if (has_non_scored_fields) {
		const field_table = document.createElement("table");

		const field_table_head = document.createElement("thead");
		const field_table_head_row = document.createElement("tr");
		field_table_head.appendChild(field_table_head_row);

		const field_table_head_item_1 = document.createElement("th");
		field_table_head_item_1.innerText = "Field";
		const field_table_head_item_2 = document.createElement("th");
		field_table_head_item_2.innerText = "Value";

		field_table_head_row.appendChild(field_table_head_item_1);
		field_table_head_row.appendChild(field_table_head_item_2);

		const field_table_body = document.createElement("tbody");
		for (const [key, value] of scores.entries()) {
			if (!(key in assessment.scales)) {
				const field_table_row = document.createElement("tr");

				const field_table_item_1 = document.createElement("td");
				const field_table_item_2 = document.createElement("td");

				field_table_item_1.innerText = key;
				field_table_item_2.innerText = value;

				field_table_row.appendChild(field_table_item_1);
				field_table_row.appendChild(field_table_item_2);

				field_table_body.appendChild(field_table_row);
			}
		}

		field_table.appendChild(field_table_head);
		field_table.appendChild(field_table_body);

		results_tables.appendChild(document.createElement("br"));
		results_tables.appendChild(field_table);
	}

	return results_tables;
}

// TODO: Add graphing
function build_assessment_result_graphs(assessment, scores, percentiles) {

}

function display_assessment_results(assessment, scores, percentiles, assessment_area) {
	document.getElementById("introduction").style.display = "unset";
	assessment_area.scrollIntoView();

	assessment_area.innerHTML = "";
	assessment_area.appendChild(build_assessment_interpretation(assessment));
	assessment_area.appendChild(build_assessment_results(assessment, scores, percentiles));
}

function start_assessment() {
	document.getElementById("introduction").style.display = "none";
	window.scrollTo(0, 0);

	const application_area = document.getElementById("application");
	application_area.innerHTML = "";

	assessments.forEach(function (item, index) {
		application_area.appendChild(build_assessment(item));
		if (index < assessments.length - 1) {
			application_area.appendChild(document.createElement("hr"));
		}
	});
}

function init_references(reference_objects) {
	const reference_list = document.getElementById("application-references");
	reference_list.innerHTML = "";

	reference_objects.forEach(function (item, index) {
		if ((item.link != null) || (item.title != null)) {
			const list_item = document.createElement("li");

			if (item.link != null) {
				const item_link = document.createElement("a");
				item_link.href = item.link;

				if (item.title != null) {
					item_link.innerText = item.title;
				} else {
					item_link.innerText = item.link;
				}

				list_item.appendChild(item_link);

			} else {
				list_item.innerText = item.title;
			}

			reference_list.appendChild(list_item);
		}
	});
}

function init_assessment_info(number_questionnaires, number_questions) {
	const application_area = document.getElementById("application");

	const application_title = document.createElement("h2");
	application_title.innerText = "Start Assessment?";

	const question_approx_multiplier = 10 ** Math.floor(Math.log10(number_questions));

	const min_question_minutes = ((number_questions * 6) / 60);
	const max_question_minutes = ((number_questions * 9) / 60);

	const assessment_info_1 = document.createElement("p");
	if (number_questionnaires > 1) {
		if (max_question_minutes <= 5) {
			assessment_info_1.innerText = "This application currently contains " + number_questionnaires + " questionnaires, which can be completed and scored independently. If you intend to complete all of the available questionnaires, this will result in a total length of roughly " + approximate(number_questions) + " questions, which is estimated to take up to 5 minutes to complete.";
		} else {
			assessment_info_1.innerText = "This application currently contains " + number_questionnaires + " questionnaires, which can be completed and scored independently. If you intend to complete all of the available questionnaires, this will result in a total length of roughly " + approximate(number_questions) + " questions, which is estimated to take " + approximate_lower(min_question_minutes) + " to " + approximate_higher(max_question_minutes) + " minutes to complete.";
		}
	} else if (number_questionnaires != 0) {
		if (max_question_minutes <= 5) {
			assessment_info_1.innerText = "This application currently contains one questionnaire, with a total length of roughly " + approximate(number_questions) + " questions. This is estimated to take up to 5 minutes to complete.";
		} else {
			assessment_info_1.innerText = "This application currently contains one questionnaire, with a total length of roughly " + approximate(number_questions) + " questions. This is estimated to take " + approximate_lower(min_question_minutes) + " to " + approximate_higher(max_question_minutes) + " minutes to complete.";
		}
	} else {
		return;
	}

	const assessment_info_2 = document.createElement("p");
	assessment_info_2.innerText = "Avoid closing the application until you are finished using it, as this will erase all progress made.";

	const start_button = document.createElement("button");
	start_button.innerText = "Start assessment";
	start_button.addEventListener("click", start_assessment);

	application_area.innerHTML = "";
	application_area.appendChild(application_title);
	application_area.appendChild(assessment_info_1);
	application_area.appendChild(assessment_info_2);
	application_area.appendChild(start_button);
}

var assessment_reference_objects = [];
var assessment_question_count = 0;

assessments.forEach(function (item, index) {
	if (item.metadata != null) {
		if (item.metadata.references != null) {
			assessment_reference_objects = assessment_reference_objects.concat(item.metadata.references);
		}
	}
	if (item.questions != null) {
		item.questions.forEach(function (item, index) {
			if (item != null) {
				assessment_question_count += Object.keys(item).length;
			}
		});
	}
});

function init_page() {
	init_references(assessment_reference_objects);
	init_assessment_info(assessments.length, assessment_question_count);
}

if (document.readyState === "loading") {
	document.addEventListener("DOMContentLoaded", init_page);
} else {
	init_page();
}
